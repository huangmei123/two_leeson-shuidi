# 如何保证页面文件能完成送达浏览器

*FP(First Paint )：页面记载到首次开始绘制的时长（衡量web页面性能）。直接影响用户的跳出率，FP越高意味着更多的PV 更高的参与度 更高的转化率。
影响FP指标的重要因素： 网络加载速度。
* 重点：在Web世界中的TCP/IP是如何工作的。
	
在网络中 ，一个文件通常会被拆分成很多数据包来进行传输，而数据包在传输过程中有很大的概率丢失或者出错。如何保证页面文件能狗完整地送到浏览器？
三个角度：数据包如何送达主机 主机如何将数据包转交给应用 数据包是如何被完整地送达应用程序。
互联网实际上是一套理念和协议组成地体系结构。

1. IP：把数据包送达目的主机
数据包在互联网上进行传输 ，要符合网际协议（IP）标准。
计算机的地址就称为 IP 地址，访问任何一个网站，实际上只是你的计算机向另一台计算机请求信息。
A----数据包--->B
数据包：附加B的IP地址信息（方便A正确寻址）
                附加A的IP地址（方便B回复信息给A）
附加的信息：放进叫做 IP头 的数据结构里。
IP头：IP数据包开头的信息，包含IP版本、源IP地址、目标IP地址、生存时间……

2. UDP ： 把数据包送达应用程序
IP只负责送达对方的电脑 需要在IP之上开发可以和应用打交道的协议，用户数据包协议（UDP ： User Datagram Protocol）
UDP的重要信息：端口号，通过端口号能把指定数据包发送到指定程序。
端口号放在UDP头，
UDP头+原始数据包=新的数据包。
UDP头：目的端口 源端口号……
在使用UDP 各种因素会导致数据包出错 虽然UDP可以校验数据是否正确 但是对于错误的包不会重发 只是丢弃。UDP不能保证数据的可靠性 但是传输的速度很快（一般应用到在线视频、互动游戏等）

3. TCP ： 把数据完整地送达应用程序
对于数据可靠性高地应用（邮件），引入TCP（Transmission Control Protocol 传输控制协议）是一种面向连接、可靠 基于字节流地传输层通信协议。
TCP相比于UDP 具有地特点：
（1）对于丢失的情况 TCP提供重传机制
（2）TCP有数据包排序机制 保证把乱序二点数据包组成一个完整的文件
TCP头：目标端口 、本机端口号 序列号（用于排序，以便接收端通过序号来重拍数据包）
完整的TCP连接过程：
TCP的生命周期：“建立连接”、“传输数据” 、“断开连接”


* 思考：
1.HTTP协议是基于TCP协议的 那么 HTTP和TCP的关系？
HTTP协议是属应用层 ，TCP协议是属于传输层的，HTTP协议位于TCP协议上层。
请求方的数据包：（在应用层加上HTTP头）----> （传输层的TCP协议）处理
接收方的数据包：（在传输层拆掉TCP头）----> （应用层的HTTP协议）处理
2.TCP传输数据时 浏览器就做渲染处理了吗？ 接受到http响应头的content-type类型就开始做渲染进程了 响应体数据一旦接受就开始做DOM解析 。
如果前面的数据包丢了 后面的数据包先来还是等待？不用担心丢失的问题 因为丢包和重传都是在tcp层解决的 。
